# Bindings for swaywm, including modes
# Put all bindings here to keep consistent

## System
## These bindings are for system actions such as brightness and volume control, and for system utilities
## like an application launcher and terminal)

### Volume
set $WOBSOCK $XDG_RUNTIME_DIR/wob.sock
exec rm -f $WOBSOCK && mkfifo $WOBSOCK && tail -f $WOBSOCK | wob

bindsym XF86AudioRaiseVolume exec amixer sset Master 5%+ | \
	sed -En 's/.*\[([0-9]+)%\].*/\1/p' | head -1 > $WOBSOCK && \
	exec pkill -SIGRTMIN+10 i3blocks
bindsym XF86AudioLowerVolume exec amixer sset Master 5%- | \
	sed -En 's/.*\[([0-9]+)%\].*/\1/p' | head -1 > $WOBSOCK && \
	exec pkill -SIGRTMIN+10 i3blocks
bindsym XF86AudioMute exec amixer sset Master toggle | \
	sed -En '/\[on\]/ s/.*\[([0-9]+)%\].*/\1/ p; /\[off\]/ s/.*/0/p' | \
	head -1 > $WOBSOCK && exec pkill -SIGRTMIN+10 i3blocks

### Media
bindsym XF86AudioPlay exec --no-startup-id playerctl play-pause
bindsym XF86AudioPause exec --no-startup-id playerctl play-pause
bindsym XF86AudioNext exec --no-startup-id playerctl next
bindsym XF86AudioPrev exec --no-startup-id playerctl previous

### Cmus menu
bindsym $Super+m exec ~/.config/rofi/bin/mpd

### Cmus window
bindsym $Super+Shift+m [app_id="foot" title="^Playing: .*"] scratchpad show

### Brightness (included for compatibility, not needed if you are based and use acpid)
bindsym XF86MonBrightnessUp exec --no-startup-id brightness 300
bindsym XF86MonBrightnessDown exec --no-startup-id brightness -300

# Toggle touchpad
bindsym XF86TouchpadToggle exec --no-startup-id toggletouch

# Calculator
bindsym XF86Calculator exec footclient --app-id 'Clac' --title 'Calculator' clac

### Screenshot menu
#bindsym Ctrl+$Alt+s \
#exec

### Quick screenshot
bindsym Print \
	exec grim ~/Pictures/$(date +'Screenshot_%Y%m%d-%H%M%S.jpg') \
	&& exec notify-send 'System' 'Captured screenshot'

### Quick screenshot (5 sec delay)
bindsym Ctrl+Print \
	exec sleep 5 && grim ~/Pictures/$(date +'Screenshot_%Y%m%d-%H%M%S.jpg') \
	&& exec swaynag -m 'Screenshot taken' -t custom

### Notifications
bindsym $Super+d exec makoctl dismiss
bindsym $Super+Shift+d exec makoctl dismiss -a
bindsym $Super+Ctrl+i exec makoctl invoke; exec makoctl dismiss

### OCR Grab
bindsym $Super+y exec grim -g "$(slurp)" - | tesseract-ocr - - | wl-copy && notify-send "Clipboard" "Copied text to selection: <b>CLIPBOARD</b>"

### Color Picker
bindsym $Super+Shift+y exec pickcolor

### Password dmenu
bindsym $Super+p exec passmenu

### Terminal
bindsym $Super+Return exec footclient

### Terminal (cwd)
bindsym $Super+Shift+Return exec footclient --working-directory="$(sway-cwd)"

### Copy cwd
bindsym $Super+Shift+u exec wl-copy "$(sway-cwd)" && notify-send "Clipboard" "Copied working directory to selection: <b>CLIPBOARD</b>"

### Application launcher
bindsym $Alt+space exec fuzzel

### Run command (like dmenu_run)
bindsym $Alt+Shift+space exec fuzzel_run

### Window switcher
bindsym $Super+g exec sway-window-picker -w 50

### Dmenu scratchpad menu
bindsym $Super+Shift+Tab exec sway-scratchpad

### Dmenu theme picker
bindsym Ctrl+$Alt+t exec flavours-menu

### Iwd menu
#bindsym Ctrl+$Alt+n exec footclient --title 'notetaker_window' -e notetaker
bindsym Ctrl+$Alt+n exec iwd-dmenu

### Vim window, copies saved file to clipboard
bindsym $Super+v exec vim-anywhere


## Basic Sway binds
## These bindings are mostly basic sway keybindings (ws change, focus change, etc)

### Reload config file
bindsym Ctrl+$Alt+r reload
### Exit sway
bindsym Ctrl+$Alt+Shift+BackSpace exec exit
### Lockscreen
bindsym Ctrl+$Alt+l exec swaylock
### Power menu (displays in reverse order)
set $power_menu swaynag -t custom -m "󰐦 UP - $(uptime -p | sed -e 's/up //g')"  \
	-z '󰿅 Logout' 'sway exit' \
	-z '󰤄 Suspend' 'sudo zzz' \
	-z '󰍁 Lock' 'swaylock' \
	-z '󰜉 Reboot' 'sudo reboot' \
	-z '󰐥 Shutdown' 'sudo poweroff'

bindsym $Super+x exec $power_menu

### kill focused container
bindsym $Super+c kill

### fullscreen mode
bindsym $Super+f fullscreen toggle

### container layouts (stacked, tabbed, split, floating, sticky)
bindsym $Super+w layout tabbed
bindsym $Super+Shift+w layout stacking
bindsym $Super+e layout toggle split
bindsym $Super+Shift+s floating toggle
bindsym $Super+o sticky toggle

### Floating modifier
floating_modifier $Super

### Focus container (h,j,k,l)
bindsym $Super+h focus left
bindsym $Super+j focus down
bindsym $Super+k focus up
bindsym $Super+l focus right

### Focus previously focused workspace
bindsym $Super+Tab workspace back_and_forth

### Focus between tiling/floating
bindsym $Super+s focus mode_toggle

### Focus parent/child/sibling
bindsym $Super+a focus parent
bindsym $Super+Shift+a focus child
bindsym $Super+space focus next sibling
bindsym $Super+Shift+space focus prev sibling

### Move focused window
bindsym $Super+Shift+h move left
bindsym $Super+Shift+j move down
bindsym $Super+Shift+k move up
bindsym $Super+Shift+l move right

### Snap focused window
bindsym $Super+$Alt+h exec sway-snap left
bindsym $Super+$Alt+j exec sway-snap down
bindsym $Super+$Alt+k exec sway-snap up
bindsym $Super+$Alt+l exec sway-snap right
bindsym $Super+$Alt+space move absolute position center

### Resize
set $distanceStr 15 px or 15 ppt
bindsym $Super+Ctrl+h resize grow left $distanceStr
bindsym $Super+Ctrl+j resize grow down $distanceStr
bindsym $Super+Ctrl+k resize grow up $distanceStr
bindsym $Super+Ctrl+l resize grow right $distanceStr

bindsym $Super+Ctrl+Shift+h resize shrink left $distanceStr
bindsym $Super+Ctrl+Shift+j resize shrink down $distanceStr
bindsym $Super+Ctrl+Shift+k resize shrink up $distanceStr
bindsym $Super+Ctrl+Shift+l resize shrink right $distanceStr

#### Preset sizes for floating windows
##### Small video-watching window
bindsym $Super+Shift+F11 floating enable, resize set 40 ppt 40 ppt

##### Dropdown
bindsym $Super+Shift+F12 \
	mark --add "dropdown", \
	floating enable, sticky enable, \
	resize set 100 ppt 50 ppt, \
	move position 0 0, move scratchpad

### Swap currently focused container with the largest container in the tree
bindsym $Super+i exec i3-swap-largest

### Change split direction
bindsym $Super+equal split horizontal
bindsym $Super+minus split vertical

### Toggle bar
bindsym $Super+b bar mode toggle

## Set workspace symbols
set $ws_q " 󰞷 "
set $ws_w " 󰖟 "
set $ws_e " 󰅴 "
set $ws_a " 󱗖 "
set $ws_s " 󰻞 "
set $ws_d " 󰆌 "

# Change workroom <https://www.reddit.com/r/swaywm/comments/tsvydv/workrooms_a_set_of_workspaces/>
set $workroom 1
bindsym Ctrl+$Super+1 set $$workroom 1
bindsym Ctrl+$Super+2 set $$workroom 2
bindsym Ctrl+$Super+3 set $$workroom 3
bindsym Ctrl+$Super+4 set $$workroom 4
bindsym Ctrl+$Super+5 set $$workroom 5

### Focus workspace (using ws numbers to keep order consistent)
bindsym Ctrl+$Super+q workspace "1:$$workroom$ws_q"
bindsym Ctrl+$Super+w workspace "2:$$workroom$ws_w"
bindsym Ctrl+$Super+e workspace "3:$$workroom$ws_e"
bindsym Ctrl+$Super+a workspace "4:$$workroom$ws_a"
bindsym Ctrl+$Super+s workspace "5:$$workroom$ws_s"
bindsym Ctrl+$Super+d workspace "6:$$workroom$ws_d"

### Move container to workspace
bindsym Ctrl+$Super+Shift+q move container to workspace "1:$$workroom$ws_q"
bindsym Ctrl+$Super+Shift+w move container to workspace "2:$$workroom$ws_w"
bindsym Ctrl+$Super+Shift+e move container to workspace "3:$$workroom$ws_e"
bindsym Ctrl+$Super+Shift+a move container to workspace "4:$$workroom$ws_a
bindsym Ctrl+$Super+Shift+s move container to workspace "5:$$workroom$ws_s"
bindsym Ctrl+$Super+Shift+d move container to workspace "6:$$workroom$ws_d"

### Move container to the scratchpad
bindsym $Super+Shift+z move scratchpad

### Show the scratchpad, excluding dropdown terminal (see config.d/startup)
#bindsym $Super+z [title="[^dropdown]"] scratchpad show
bindsym $Super+z scratchpad show
### Show dropdown
bindsym F12 [con_mark="^dropdown$"] scratchpad show

## Program lauching shortcuts
## Easy to remember shortcuts based on the application's first letter (when available)
#bindsym $Super+Shift+f exec sway-focus-run -c qutebrowser qutebrowser
#bindsym $Super+Shift+r exec sway-focus-run -c Zathura zathura


## Modes
## Various sway modes in no particular order
## use variables to name modes

### Mode to disable all keybindings (good for remote desktop or nested wayland compositor)
set $passthrough "󰌾 Keybindings Are Disabled"
mode $passthrough {
	bindsym Shift+Escape mode "default"
}
bindsym $Super+Shift+v mode $passthrough

### Swap containers without changing the tree's layout
set $swap "󰓡 Swap Containers"
mode $swap {
	# Focus workspace
	bindsym $Super+1 workspace number $ws1
	bindsym $Super+2 workspace number $ws2
	bindsym $Super+3 workspace number $ws3
	bindsym $Super+4 workspace number $ws4
	bindsym $Super+5 workspace number $ws5
	bindsym $Super+6 workspace number $ws6
	bindsym $Super+7 workspace number $ws7
	bindsym $Super+8 workspace number $ws8
	bindsym $Super+9 workspace number $ws9
	bindsym $Super+0 workspace number $ws10

	# Focus container (h,j,k,l)
	bindsym $Super+h focus left
	bindsym $Super+j focus down
	bindsym $Super+k focus up
	bindsym $Super+l focus right

	# Focus parent/child
	bindsym $Super+a focus parent
	bindsym $Super+Shift+a focus child

	# Confirm
	bindsym $Super+Return swap container with mark "_swapee"; unmark "_swapee"; mode "default"
	bindsym Return swap container with mark "_swapee"; unmark "_swapee"; mode "default"

	# Cancel
	bindsym Escape unmark "_swapee"; mode "default"
}
bindsym $Super+Shift+i mark --add "_swapee"; mode $swap
